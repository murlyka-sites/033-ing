"use strict";function _classCallCheck(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function i(i,e){for(var t=0;t<e.length;t++){var s=e[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}return function(e,t,s){return t&&i(e.prototype,t),s&&i(e,s),e}}(),FlatMenu=function(){function i(e){_classCallCheck(this,i),this.wrap=e.wrap,this.visible=e.visible,this.hidden=e.hidden,this.button=e.button,this.visibleItems=Array.prototype.slice.call(this.visible.children,0),this.more=this.visibleItems.pop(),this.hiddenItems=[],this.update()}return _createClass(i,[{key:"update",value:function(){this.availableSpace<this.sumVisibleItems()&&this.visibleItems.length>2?this.toEnd():this.hiddenItems.length>0&&this.toStart()}},{key:"toStart",value:function(){var i=this.hiddenItems.shift();0==this.hiddenItems.length&&this.more.classList.add("hidden"),this.visibleItems.push(i),this.visible.insertBefore(i,this.visible.children[this.visible.children.length-1]),this.availableSpace<this.sumVisibleItems()&&this.toEnd()}},{key:"toEnd",value:function(){var i=this.visibleItems.pop();0==this.hiddenItems.length&&this.more.classList.remove("hidden"),this.hiddenItems.unshift(i),this.hidden.insertBefore(i,this.hidden.children.firstChild),this.availableSpace<this.sumVisibleItems()&&this.visibleItems.length>2&&this.toEnd()}},{key:"sumVisibleItems",value:function(){return this.visibleItems.reduce(function(i,e){return i+e.clientWidth},0)}},{key:"availableSpace",get:function(){return this.wrap.clientWidth-this.more.clientWidth}}]),i}();